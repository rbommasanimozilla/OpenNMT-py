#!/bin/bash
source ../tmp/venv/bin/activate
python train.py -save_model /snakepit/jobs/1124/keep/newsroom -data /snakepit/shared/data/cornell/newsroom-tagged/preprocessed/newsroom-tagged  -copy_attn -global_attention mlp -word_vec_size 256 -rnn_size 256 -enc_layers 4 -dec_layers 1 -encoder_type brnn -train_steps 250000 -max_grad_norm 2 -dropout 0. -batch_size 16 -optim adagrad -learning_rate 0.15 -adagrad_accumulator_init 0.1 -reuse_copy_attn -copy_loss_by_seqlength -bridge -seed 777 -gpuid 0 1 
mkdir testout
python translate.py -gpu 0 -batch_size 4 -beam_size 10 -model /snakepit/jobs/1124/keep/newsroom_step_250000.pt -src /snakepit/shared/data/cornell/newsroom-tagged/val.txt.srcp -output /snakepit/jobs/1124/keep/newsroom_step_250000.out -min_length 5 -stepwise_penalty -coverage_penalty summary -beta 5 -length_penalty wu -alpha 0.9 -block_ngram_repeat 3 -ignore_when_blocking "." "</t>" "<t>"