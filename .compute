#!/bin/bash
source ../tmp/venv/bin/activate
python preprocess.py -train_src /snakepit/shared/data/cornell/newsroom/newsroom-lg/train.txt.srcp -train_tgt /snakepit/shared/data/cornell/newsroom/newsroom-lg/train.txt.tgtp -valid_src /snakepit/shared/data/cornell/newsroom/newsroom-lg/val.txt.srcp -valid_tgt /snakepit/shared/data/cornell/newsroom/newsroom-lg/val.txt.tgtp -save_data /snakepit/shared/data/cornell/newsroom-new -src_seq_length 10000 -tgt_seq_length 10000 -src_seq_length_trunc 400 -tgt_seq_length_trunc 100 -dynamic_dict -share_vocab -max_shard_size 10485760
python train.py -gpuid 0 -save_model models/newsroom-128512x416350lr2 -data /snakepit/shared/data/cornell/newsroom-new -copy_attn -global_attention mlp -word_vec_size 128 -rnn_size 512 -layers 4 -encoder_type brnn -train_steps 350000 -max_grad_norm 2 -dropout 0. -batch_size 16 -optim adagrad -learning_rate 0.15 -adagrad_accumulator_init 0.1 -reuse_copy_attn -copy_loss_by_seqlength -bridge -seed 777
